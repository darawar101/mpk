<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGO Dashboard - Justice for All</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @media (max-width: 640px) {
            .filter-container {
                flex-direction: column;
                align-items: center;
            }
            .filter-container select,
            .filter-container input,
            .filter-container button {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>

<body class="bg-gray-900 text-white">
    <nav class="bg-white border-gray-200 dark:bg-gray-900">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
          <a href="https://flowbite.com/" class="flex items-center space-x-3 rtl:space-x-reverse">
              <img src="Adobe Express - file (1) (1).png" class="h-10" alt="Flowbite Logo" />
              <span class="self-center text-2xl font-semibold whitespace-nowrap text-blue-500">PAKISTAN DARAWAR ITEHAD</span>
          </a>
          <button data-collapse-toggle="navbar-default" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-default" aria-expanded="false">
              <span class="sr-only">Open main menu</span>-
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
              </svg>
          </button>
          <div class="hidden w-full md:block md:w-auto" id="navbar-default">
            <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
              <li>
                <a href="https://docs.google.com/spreadsheets/d/1GAuXwfN3L7Gdbyn7RXP4sWImIwo72T7xgDBN1Uw7vTs/edit?usp=sharing" class="block py-2 px-3 text-white bg-blue-700 rounded-sm md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500" aria-current="page">SHEET</a>
              </li>
              <li>
                <a href="dashboard.html" class="block py-2 px-3 text-white bg-blue-700 rounded-sm md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500" aria-current="page">DASHBOARD</a>
              </li>
             
            </ul>
          </div>
        </div>
      </nav>

    <section class="p-10 text-center">
        <h2 class="text-3xl font-bold">Case Reports</h2>
        <div class="flex flex-wrap justify-center mt-6 gap-4 filter-container">
            <select id="crimeType" class="text-black p-2 rounded w-full sm:w-auto">
                <option value="">All Crimes</option>
                <option value="Kidnap">Kidnap</option>
                <option value="Force Conversion">Force Conversion</option>
                <option value="Suicide">Suicide</option>
                <option value="Murder">Murder</option>
                <option value="Child Marriage">Child Marriage</option>
                <option value="Land Grabber">Land Grabber</option>
                <option value="Others">Others</option>
            </select>
            <input type="date" id="dateFilter" class="text-black p-2 rounded w-full sm:w-auto">
            <select id="genderFilter" class="text-black p-2 rounded w-full sm:w-auto">
                <option value="">All Genders</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
            <input type="text" id="nameFilter" placeholder="Search by Name" class="text-black p-2 rounded w-full sm:w-auto" />
            <button onclick="filterData()" class="bg-blue-500 p-2 rounded w-full sm:w-auto">Filter</button>
            <button onclick="downloadCSV()" class="bg-green-500 p-2 rounded w-full sm:w-auto">Download CSV</button>
        </div>

        <div class="table-container overflow-auto mt-6">
            <table class="w-full text-left border border-gray-700">
                <thead>
                    <tr class="bg-gray-700">
                        <th class="p-2">Timestamp</th>
                        <th class="p-2">Date</th>
                        <th class="p-2">Day</th>
                        <th class="p-2">Time</th>
                        <th class="p-2">Victim Name</th>
                        <th class="p-2">Case Picture</th>
                        <th class="p-2">Gender</th>
                        <th class="p-2">Religion</th>
                        <th class="p-2">Location</th>
                        <th class="p-2">Case Description</th>
                    </tr>
                </thead>
                <tbody id="reportTable"></tbody>
            </table>
        </div>
    </section>

    <script>
        let allData = [];
        async function fetchData() {
            const sheetID = "1GAuXwfN3L7Gdbyn7RXP4sWImIwo72T7xgDBN1Uw7vTs";
            const apiKey = "AIzaSyD2A2M4nM0_mUyPopG-9d3_piiljHgCq58";
            const sheetNames = ["Others Cases", "Land Grabber", "Child Marrige", "Murder", "Sucide", "Force Conversion", "Kidnap"];
            const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values:batchGet?${sheetNames.map(name => `ranges=${encodeURIComponent(name)}`).join("&")}&key=${apiKey}`;
            try {
                const response = await fetch(url);
                const json = await response.json();
                allData = [];
                json.valueRanges.forEach((sheet, index) => {
                    if (sheet.values) {
                        const headers = sheet.values[0].map(header => header.trim());
                        const rows = sheet.values.slice(1);
                        rows.forEach(row => {
                            let rowData = {};
                            headers.forEach((header, i) => {
                                rowData[header] = row[i] ? row[i].trim() : "";
                            });
                            rowData["Crime Type"] = sheetNames[index];
                            allData.push(rowData);
                        });
                    }
                });
                displayData(allData);
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        function displayData(data) {
            const table = document.getElementById("reportTable");
            table.innerHTML = "";
            data.forEach(row => {
                let imageUrl = row["Case Picture"];
                table.innerHTML += `<tr class='border border-gray-700'>
                    <td class='p-2'>${row.Timestamp}</td>
                    <td class='p-2'>${row.Date}</td>
                    <td class='p-2'>${row.Day}</td>
                    <td class='p-2'>${row.Time}</td>
                    <td class='p-2'>${row["Victim Name"]}</td>
                    <td class='p-2'><a href='${imageUrl}' target='_blank' class='bg-blue-500 text-white px-3 py-1 rounded'>Click Here</a></td>
                    <td class='p-2'>${row.Gender}</td>
                    <td class='p-2'>${row.Religion}</td>
                    <td class='p-2'>${row.Location}</td>
                    <td class='p-2'>${row["Case Description"]}</td>
                </tr>`;
            });
        }

        function filterData() {
            // Filtering logic
        }

        function downloadCSV() {
            // CSV download logic
        }

        fetchData();
    </script>
</body>
</html>
